<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<title>æš—å·ä½œæˆãƒ»è§£èª­</title>
<script src="https://cdn.jsdelivr.net/npm/qrcodejs/qrcode.min.js"></script>
<style>
body {
  background: linear-gradient(120deg, #fff, #c0f0ff);
  color: #111;
  font-family: "Noto Sans JP", sans-serif;
  text-align: center;
  padding: 40px;
}
h1 { color: #0077aa; margin-bottom: 20px; }
textarea, input {
  width: 90%;
  font-size: 16px;
  padding: 10px;
  border-radius: 8px;
  margin: 10px 0;
  background: #fff;
  color: #111;
  border: 2px solid #0077aa;
}
button {
  margin: 6px;
  padding: 10px 18px;
  font-size: 16px;
  background: #0077aa;
  color: #fff;
  border: none;
  border-radius: 6px;
  cursor: pointer;
}
button:hover { background: #005f88; }
#qrcode { margin-top: 20px; }
#footer { margin-top: 30px; font-size: 13px; color: #555; }
</style>
</head>
<body>
<h1>æš—å·ä½œæˆãƒ»è§£èª­</h1>

<p>æš—å·ã‚­ãƒ¼ï¼ˆç®¡ç†è€…ã«ãŠå°‹ã­ãã ã•ã„ï¼‰:</p>
<input type="text" id="key" placeholder="ä¾‹ï¼šmykey123">

<p>å¤‰æ›ã™ã‚‹ãƒ†ã‚­ã‚¹ãƒˆ:</p>
<textarea id="input" rows="4"></textarea>

<div>
  <button onclick="runMode('encode')">ğŸ”’ æš—å·åŒ–</button>
  <button onclick="runMode('decode')">ğŸ”“ è§£èª­</button>
  <button onclick="clearAll()">ã‚¯ãƒªã‚¢</button>
</div>

<p>çµæœ:</p>
<textarea id="output" rows="4" readonly></textarea>

<div id="qrcode"></div>

<div id="footer">Â© 2025 koarasama22's ä¸Šæ‰ä¿¡å· å®Œå…¨ç‰ˆ</div>

<script>
const validKeys = ["koarasama22","æš—å·","2025"];
function encodeText(text,key=""){let encoded="";for(let i=0;i<text.length;i++){const code=text.codePointAt(i)+key.length*7;encoded+=Math.floor(code/100)+","+(code%100);if(i<text.length-1) encoded+=" ";if(code>0xffff) i++;}return encoded;}
function decodeText(text,key=""){const pairs=text.trim().split(/\s+/);let decoded="";for(const pair of pairs){const [row,col]=pair.split(",").map(Number);const code=row*100+col-key.length*7;decoded+=String.fromCodePoint(code);}return decoded;}
function isValidKey(key){ return validKeys.includes(key.trim()); }
function runMode(mode){const input=document.getElementById("input").value;const key=document.getElementById("key").value;if(!input.trim()) return alert("ãƒ†ã‚­ã‚¹ãƒˆã‚’å…¥åŠ›ã—ã¦ãã ã•ã„ã€‚");if(!key.trim()) return alert("ã‚­ãƒ¼ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„ã€‚");if(!isValidKey(key)) return alert("ğŸš« ç„¡åŠ¹ãªã‚­ãƒ¼ã§ã™");let output="";if(mode==="encode") output=encodeText(input,key);else output=decodeText(input,key);document.getElementById("output").value=output;if(mode==="encode") makeQR(output);else document.getElementById("qrcode").innerHTML="";}
function makeQR(text){document.getElementById("qrcode").innerHTML="";new QRCode(document.getElementById("qrcode"),{text:text,width:200,height:200,colorDark:"#0077aa",colorLight:"#fff"});}
function clearAll(){document.getElementById("input").value="";document.getElementById("output").value="";document.getElementById("qrcode").innerHTML="";document.getElementById("key").value="";}
</script>
</body>
</html>
